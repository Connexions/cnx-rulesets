/* ---------------------------------------------------
 * Figures/Subfigures
 * ---------------------------------------------------
 */
img {
  // @include x-center-image();
  display: block;
  margin: auto;
  max-width: 6in;
  width: 100%;
}

.os-figure,
.preface .os-figure {
  // @include x-center-image();
  display: block;
  margin: auto;
  // max-width: 6.5in;

  width: 100%;
  float: column-top; 
  margin-bottom: size-scale(3);

  &:last-child {        // Remove excess padding on figures at end of sections
    margin-bottom: auto;
  }

  > figure {
    margin: auto;
    padding-bottom: size-scale(-4);
  }

  > .os-caption-container {
    font-family: font-map(serif);
    font-size: size-scale(-2);
    caption-side: bottom;
    padding-top: size-scale(-6);
    padding-left: 0px;
    padding-bottom: size-scale(-1);

    .os-title-label, .os-number, .os-title {
      // @include caption-number-style();
      color: color-map(caption-number);
      border: none;
      font-weight: 700;

      display: inline;
    }
    
    .os-number {
      margin-right: size-scale(-4);
    }

    .os-caption {
      // @include caption-style();
      margin-left: size-scale(-5);

      color: color-map(caption);
      text-align: center;
      display: table-caption;
      text-align: left;
      page-break-before: avoid;
      line-height: 1.6em;
  
      display: inline;
    }
  }
}

section > figure {
  // @include x-center-image();
  display: block;
  margin: auto;
  max-width: 6.5in;

  width: 100%;
  float: column-top; 
  margin-bottom: size-scale(3);

  &:last-child {        // Remove excess padding on figures at end of sections
    margin-bottom: auto;
  }

  > span[data-type="media"] img {
    padding-bottom: size-scale(-4);
  }
  
  > div[data-type="title"] {
    // @include caption-number-style(); // content: "Figure " counter(chapter, decimal) "." counter(figure) " " string(cnx-figure-title);
    color: color-map(caption-number);
    border: none;
    padding-top: size-scale(-6);
    padding-left: 0px;
    padding-bottom: size-scale(-1);
    margin-right: size-scale(-5);
    font-weight: 700;
    font-family: font-map(serif);
    font-size: size-scale(-2);
    caption-side: bottom;

    display: inline;
    
    &::before {
      margin-right: size-scale(-3);
    }
  }

  figcaption {
    // @include caption-style();
    color: color-map(caption);
    // text-align: center;
    // display: table-caption;
    text-align: left;
    page-break-before: avoid;
    line-height: 1.6em;
    font-family: font-map(serif);
    font-size: size-scale(-2);
    caption-side: bottom;

    display: inline;
  }
}

